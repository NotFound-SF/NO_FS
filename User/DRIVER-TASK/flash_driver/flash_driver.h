
#ifndef         __FLASH_DRIVER_H
#define         __FLASH_DRIVER_H


/*
*********************************************************************************************************
*                                              INCLUDE FILES
*********************************************************************************************************
*/

#include "includes.h"
#include "stm32f4xx.h"


/*
*********************************************************************************************************
*                                          FLASH_DRIVER_MSG
*********************************************************************************************************
*/

#pragma pack(1)                                                        // 修改对齐方式是必须的
typedef struct {
	uint8_t  option;
	OS_TCB   *task_tcb;
	uint32_t addr;
	uint16_t len;
}FLASH_DRIVER_MSG; 
#pragma pack()



/*
*********************************************************************************************************
*                                            TASK PRIORITIES
*********************************************************************************************************
*/

#define          DRIVER_TASK_FLASH_PRIO                  18u

/*
*********************************************************************************************************
*                                            TASK STACK SIZES   32bit
*********************************************************************************************************
*/

#define          DRIVER_TASK_FLASH_STK_SIZE              168

/*
*********************************************************************************************************
*                                               DEFINES
*********************************************************************************************************
*/

#define          FLASH_DRIVER_Q_SIZE                      0x0A       // 内建消息队列长度
#define          FLASH_OPTION_R                           0x00       // 读取flash操作
#define          FLASH_OPTION_W                           0x01       // 写flash操作


/*
*********************************************************************************************************
*                                         FUNCTION PROTOTYPES
*********************************************************************************************************
*/

CPU_BOOLEAN  BSP_FLASH_Drivet_Init (void);
void         BSP_FLASH_Drivet_Request (FLASH_DRIVER_MSG *request);



#endif           /* __FLASH_DRIVER_H */



